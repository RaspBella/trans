<!DOCTYPE html>
<html>
  <head>
    <title>temp test tool</title>
    <link rel="stylesheet" href="crs.css">
  </head>
  <body>
    <div class="container">
      <input type="text" id="code" minlength="3" maxlength="3"/>
      <input type="text" id="name"/>
    </div>
    <script type="module" src="crs.js"></script>
    <script>
      const code = document.getElementById("code");
      const name = document.getElementById("name");

      function submit_code() {
        if (/^[a-zA-Z]{3}$/.test(code.value)) {
          const result = crs(code.value.toUpperCase());

          if (result) {
            code.value = code.value.toUpperCase();

            name.value = result;

            return;
          }
        }

        name.value = "";
      }

      function submit_name() {
        const result = src(name.value);

        if (result && result != "") {
          code.value = result;

          name.value = crs(code.value);

          return;
        }

        code.value = "";
      }

      code.addEventListener("change", submit_code);
      name.addEventListener("change", submit_name);

      code.addEventListener("keydown", function (e) {
        if (e.code === "Enter") {
          submit_code();
        }
      });
 
      name.addEventListener("keydown", function (e) {
        if (e.code === "Enter") {
          submit_name();
        }
      });
    </script>
  </body>
</html>
